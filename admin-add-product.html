<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Add Product ‚Ä¢ Gauri Creations</title>

<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="favicon.ico">

<style>
  :root {
    --bg-grad: linear-gradient(135deg, #86e1ff, #ffd4b8);
    --glass-bg: rgba(255, 255, 255, 0.18);
    --glass-border: rgba(255, 255, 255, 0.6);
    --shadow-strong: 0 22px 60px rgba(15, 23, 42, 0.40);
  }

  *{ box-sizing:border-box; }

  body {
    margin:0;
    min-height:100vh;
    font-family:Poppins, system-ui;
    background:var(--bg-grad);
    display:flex;
    justify-content:center;
    padding:18px;
  }

  .shell { width:100%; max-width:980px; }

  .card {
    border-radius:26px;
    background:var(--glass-bg);
    border:1px solid var(--glass-border);
    backdrop-filter:blur(22px);
    padding:18px;
    box-shadow:var(--shadow-strong);
  }

  .card-header {
    display:flex;
    justify-content:space-between;
    margin-bottom:16px;
  }

  .card-title { font-size:20px; font-weight:700; }
  .card-sub { font-size:12px; color:#555; }

  .pill-link {
    border:1px solid #ccc;
    background:white;
    padding:7px 12px;
    border-radius:999px;
    text-decoration:none;
    font-size:12px;
    color:#111;
  }

  .layout {
    display:grid;
    grid-template-columns:1.3fr 1fr;
    gap:14px;
  }

  @media(max-width:900px){
    .layout{ grid-template-columns:1fr; }
  }

  .section-card {
    background:white;
    border-radius:20px;
    padding:14px;
    border:1px solid #e5e7eb;
    box-shadow:0 10px 25px rgba(0,0,0,0.15);
  }

  .section-title { font-size:14px; font-weight:600; margin-bottom:4px; }
  .section-sub { font-size:11px; color:#777; margin-bottom:10px; }

  label { font-size:12px; font-weight:600; margin-bottom:4px; display:block; }

  .input, .textarea{
    width:100%;
    padding:9px 12px;
    border-radius:12px;
    border:1px solid #ccc;
    background:#f5f5f5;
    font-size:13px;
  }

  .textarea{ resize:vertical; min-height:80px; }

  .field-row {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
  }

  @media(max-width:600px){
    .field-row{ grid-template-columns:1fr; }
  }

  .drop-zone {
    border:1.5px dashed #999;
    padding:14px;
    border-radius:16px;
    background:#fafafa;
    text-align:center;
    cursor:pointer;
    font-size:12px;
  }

  .preview-grid {
    margin-top:10px;
    display:grid;
    grid-template-columns:repeat(3, 1fr);
    gap:8px;
  }

  .preview-card {
    position:relative;
    height:90px;
    border-radius:14px;
    overflow:hidden;
    background:#ddd;
  }

  .preview-card img{
    width:100%;
    height:100%;
    object-fit:cover;
  }

  .remove-btn{
    position:absolute;
    top:4px; right:4px;
    background:#e11d48;
    color:white;
    border:none;
    border-radius:999px;
    padding:3px 7px;
    font-size:10px;
    cursor:pointer;
  }

  .preview-label{
    position:absolute;
    bottom:4px; left:4px;
    background:#0009;
    color:white;
    font-size:10px;
    padding:2px 6px;
    border-radius:999px;
  }

  .video-chip{
    margin-top:8px;
    background:#def7ec;
    padding:6px 10px;
    border-radius:10px;
    font-size:11px;
    display:inline-flex;
    gap:6px;
  }

  .footer-row{
    margin-top:16px;
    display:flex;
    justify-content:space-between;
    align-items:center;
  }

  .btn-primary{
    background:linear-gradient(135deg,#2563eb,#ec4899);
    color:white;
    border:none;
    padding:12px 20px;
    border-radius:999px;
    font-size:14px;
    display:flex;
    align-items:center;
    gap:6px;
    cursor:pointer;
  }

  .status-text{ font-size:12px; color:#777; }
  .status-text.ok{ color:#15803d; }
  .status-text.err{ color:#e11d48; }
</style>
</head>

<body>
<div class="shell">
<div class="card">

<div class="card-header">
  <div>
    <div class="card-title">Add New Product</div>
    <div class="card-sub">Upload images & details.</div>
  </div>
  <a href="admin.html" class="pill-link">‚Üê Back</a>
</div>

<div class="layout">
<section class="section-card">
<label>Product Name *</label>
<input id="name" class="input" type="text"/>

<div class="field-row">
  <div>
    <label>Price (‚Çπ) *</label>
    <input id="price" class="input" type="number"/>
  </div>
  <div>
    <label>Category *</label>
    <input id="category" class="input" type="text"/>
  </div>
</div>

<div class="field-row">
  <div>
    <label>Stock *</label>
    <input id="stock" class="input" type="number"/>
  </div>
  <div>
    <label>Weight</label>
    <input id="weight" class="input" type="text"/>
  </div>
</div>

<div class="field-row">
  <div><label>Length</label><input id="length" class="input" type="number"/></div>
  <div><label>Width</label><input id="width" class="input" type="number"/></div>
</div>

<div class="field-row">
  <div><label>Height</label><input id="height" class="input" type="number"/></div>
  <div><label>Video URL</label><input id="videoUrlInput" class="input" type="text"/></div>
</div>

<label>Description</label>
<textarea id="description" class="textarea"></textarea>
</section>

<section class="section-card">
<label>Images</label>
<div id="imageDropZone" class="drop-zone">Click or drag images</div>
<input id="imageInput" type="file" accept="image/*" multiple hidden>
<div id="imagePreview" class="preview-grid"></div>

<br>
<label>Video</label>
<div id="videoDropZone" class="drop-zone">Click or drag video</div>
<input id="videoInput" type="file" accept="video/*" hidden>
<div id="videoInfo" class="video-chip" style="display:none;">
üé¨ <span id="videoName"></span>
</div>
</section>
</div>

<div class="footer-row">
  <div id="statusText" class="status-text">Fill details and click Add Product.</div>
  <button id="saveBtn" class="btn-primary">‚ûï Add Product</button>
</div>

</div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyFU0tpoO8_T_sjGzyU31_x18rJz1z7Xlbc4ak1vYUKcOkPvxyi4ZilEe3Xc0mOaLgt/exec";

let imageFiles = [];
let videoFile = null;

const qs = id => document.getElementById(id);
const imagePreview = qs("imagePreview");
const imageInput = qs("imageInput");
const videoInput = qs("videoInput");
const videoInfo = qs("videoInfo");
const videoNameEl = qs("videoName");
const statusText = qs("statusText");
const saveBtn = qs("saveBtn");

/* üî• RESET FIX (ONLY ADDITION) */
function resetForm(){
  ["name","price","category","stock","weight","length","width","height","description","videoUrlInput"]
  .forEach(id => qs(id).value = "");

  imageFiles = [];
  imagePreview.innerHTML = "";
  imageInput.value = "";

  videoFile = null;
  videoInput.value = "";
  videoInfo.style.display = "none";
  videoNameEl.textContent = "";

  saveBtn.disabled = false;
  saveBtn.innerHTML = "‚ûï Add Product";
  statusText.textContent = "Fill details and click Add Product.";
  statusText.className = "status-text";
}

/* SUBMIT */
saveBtn.onclick = async () => {
  saveBtn.disabled = true;
  saveBtn.innerHTML = "‚è≥ Saving‚Ä¶";

  const body = {
    name: qs("name").value,
    price: qs("price").value,
    category: qs("category").value,
    stock: qs("stock").value,
    weight: qs("weight").value,
    length: qs("length").value,
    width: qs("width").value,
    height: qs("height").value,
    description: qs("description").value
  };

  const res = await fetch(SCRIPT_URL + "?action=createProduct", {
    method: "POST",
    body: JSON.stringify(body)
  });

  const data = await res.json();
  if(data.success){
    statusText.textContent = "Product saved ‚úî";
    statusText.className = "status-text ok";
    setTimeout(resetForm, 1200);
  }
};
</script>
</body>
</html>